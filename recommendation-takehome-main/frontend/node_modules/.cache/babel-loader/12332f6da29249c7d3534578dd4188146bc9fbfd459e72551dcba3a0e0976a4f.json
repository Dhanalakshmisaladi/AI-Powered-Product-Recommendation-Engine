{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swamy\\\\Downloads\\\\recommendation-takehome-main\\\\recommendation-takehome-main\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Catalog from './components/Catalog';\nimport UserPreferences from './components/UserPreferences';\nimport BrowsingHistory from './components/BrowsingHistory';\nimport Recommendations from './components/Recommendations';\nimport ProductDetail from './components/ProductDetail';\nimport CatalogControls from './components/CatalogControls'; // Import the new component\nimport './styles/App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [preferences, setPreferences] = useState({\n    category: '',\n    price_range: ''\n  });\n  const [history, setHistory] = useState([]);\n  const [recommendations, setRecommendations] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [productCatalog, setProductCatalog] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n\n  // New state for filtering and sorting controls\n  const [filterCategory, setFilterCategory] = useState('');\n  const [sortOrder, setSortOrder] = useState('default');\n  useEffect(() => {\n    const fetchAllProducts = async () => {\n      try {\n        const response = await fetch('http://127.0.0.1:5001/api/products');\n        const data = await response.json();\n        setProductCatalog(data);\n      } catch (error) {\n        console.error(\"Failed to fetch the product catalog:\", error);\n      }\n    };\n    fetchAllProducts();\n  }, []);\n  const handleProductClick = product => {\n    if (!history.find(p => p.id === product.id)) {\n      setHistory([...history, product]);\n    }\n    setSelectedProduct(product);\n  };\n  const handleRecommendationClick = productId => {\n    const product = productCatalog.find(p => p.id === productId);\n    setSelectedProduct(product);\n  };\n  const handleDeleteHistoryItem = productIdToDelete => {\n    const updatedHistory = history.filter(item => item.id !== productIdToDelete);\n    setHistory(updatedHistory);\n  };\n  const handleGetRecommendations = async () => {\n    setIsLoading(true);\n    setRecommendations(null);\n    try {\n      const response = await fetch('http://127.0.0.1:5001/api/recommendations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          preferences: preferences,\n          history: history.map(({\n            id,\n            name,\n            category\n          }) => ({\n            id,\n            name,\n            category\n          }))\n        })\n      });\n      const data = await response.json();\n      setRecommendations(data);\n    } catch (error) {\n      console.error('Failed to fetch recommendations:', error);\n      setRecommendations({\n        error: 'Failed to connect to the server.'\n      });\n    }\n    setIsLoading(false);\n  };\n\n  // Compute the displayed products based on filter and sort state\n  const filteredAndSortedProducts = productCatalog.filter(product => product.category.toLowerCase().includes(filterCategory.toLowerCase())).sort((a, b) => {\n    if (sortOrder === 'price-asc') {\n      return a.price - b.price;\n    }\n    if (sortOrder === 'price-desc') {\n      return b.price - a.price;\n    }\n    return 0; // Default order\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"AI Product Recommender\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-layout\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-panel\",\n          children: [/*#__PURE__*/_jsxDEV(UserPreferences, {\n            preferences: preferences,\n            setPreferences: setPreferences,\n            onSubmit: handleGetRecommendations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(BrowsingHistory, {\n            history: history,\n            onDeleteItem: handleDeleteHistoryItem\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"Getting recommendations...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(Recommendations, {\n            recommendations: recommendations,\n            onProductSelect: handleRecommendationClick,\n            productCatalog: productCatalog\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-panel\",\n          children: selectedProduct ? /*#__PURE__*/_jsxDEV(ProductDetail, {\n            product: selectedProduct,\n            onClose: () => setSelectedProduct(null)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(CatalogControls, {\n              filter: filterCategory,\n              setFilter: setFilterCategory,\n              sort: sortOrder,\n              setSort: setSortOrder\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Catalog, {\n              products: filteredAndSortedProducts // Pass the computed list\n              ,\n              onProductClick: handleProductClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"FMPIdoy9IE0h2dQmFA15xNwvxp0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Catalog","UserPreferences","BrowsingHistory","Recommendations","ProductDetail","CatalogControls","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","preferences","setPreferences","category","price_range","history","setHistory","recommendations","setRecommendations","isLoading","setIsLoading","productCatalog","setProductCatalog","selectedProduct","setSelectedProduct","filterCategory","setFilterCategory","sortOrder","setSortOrder","fetchAllProducts","response","fetch","data","json","error","console","handleProductClick","product","find","p","id","handleRecommendationClick","productId","handleDeleteHistoryItem","productIdToDelete","updatedHistory","filter","item","handleGetRecommendations","method","headers","body","JSON","stringify","map","name","filteredAndSortedProducts","toLowerCase","includes","sort","a","b","price","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onDeleteItem","onProductSelect","onClose","setFilter","setSort","products","onProductClick","_c","$RefreshReg$"],"sources":["C:/Users/swamy/Downloads/recommendation-takehome-main/recommendation-takehome-main/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Catalog from './components/Catalog';\nimport UserPreferences from './components/UserPreferences';\nimport BrowsingHistory from './components/BrowsingHistory';\nimport Recommendations from './components/Recommendations';\nimport ProductDetail from './components/ProductDetail';\nimport CatalogControls from './components/CatalogControls'; // Import the new component\nimport './styles/App.css';\n\nfunction App() {\n  const [preferences, setPreferences] = useState({ category: '', price_range: '' });\n  const [history, setHistory] = useState([]);\n  const [recommendations, setRecommendations] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [productCatalog, setProductCatalog] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n\n  // New state for filtering and sorting controls\n  const [filterCategory, setFilterCategory] = useState('');\n  const [sortOrder, setSortOrder] = useState('default');\n\n  useEffect(() => {\n    const fetchAllProducts = async () => {\n      try {\n        const response = await fetch('http://127.0.0.1:5001/api/products');\n        const data = await response.json();\n        setProductCatalog(data);\n      } catch (error) {\n        console.error(\"Failed to fetch the product catalog:\", error);\n      }\n    };\n    fetchAllProducts();\n  }, []);\n\n  const handleProductClick = (product) => {\n    if (!history.find(p => p.id === product.id)) {\n      setHistory([...history, product]);\n    }\n    setSelectedProduct(product);\n  };\n\n  const handleRecommendationClick = (productId) => {\n    const product = productCatalog.find(p => p.id === productId);\n    setSelectedProduct(product);\n  };\n\n  const handleDeleteHistoryItem = (productIdToDelete) => {\n    const updatedHistory = history.filter(item => item.id !== productIdToDelete);\n    setHistory(updatedHistory);\n  };\n\n  const handleGetRecommendations = async () => {\n    setIsLoading(true);\n    setRecommendations(null);\n    try {\n      const response = await fetch('http://127.0.0.1:5001/api/recommendations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          preferences: preferences,\n          history: history.map(({ id, name, category }) => ({ id, name, category }))\n        }),\n      });\n      const data = await response.json();\n      setRecommendations(data);\n    } catch (error) {\n      console.error('Failed to fetch recommendations:', error);\n      setRecommendations({ error: 'Failed to connect to the server.' });\n    }\n    setIsLoading(false);\n  };\n\n  // Compute the displayed products based on filter and sort state\n  const filteredAndSortedProducts = productCatalog\n    .filter(product =>\n      product.category.toLowerCase().includes(filterCategory.toLowerCase())\n    )\n    .sort((a, b) => {\n      if (sortOrder === 'price-asc') {\n        return a.price - b.price;\n      }\n      if (sortOrder === 'price-desc') {\n        return b.price - a.price;\n      }\n      return 0; // Default order\n    });\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>AI Product Recommender</h1>\n      </header>\n      <main>\n        <div className=\"main-layout\">\n          <div className=\"left-panel\">\n            <UserPreferences\n              preferences={preferences}\n              setPreferences={setPreferences}\n              onSubmit={handleGetRecommendations}\n            />\n            <BrowsingHistory\n              history={history}\n              onDeleteItem={handleDeleteHistoryItem}\n            />\n            {isLoading && <div className=\"loading\">Getting recommendations...</div>}\n            <Recommendations\n              recommendations={recommendations}\n              onProductSelect={handleRecommendationClick}\n              productCatalog={productCatalog}\n            />\n          </div>\n          <div className=\"right-panel\">\n            {selectedProduct ? (\n              <ProductDetail\n                product={selectedProduct}\n                onClose={() => setSelectedProduct(null)}\n              />\n            ) : (\n              <>\n                {/* Add the controls component to the UI */}\n                <CatalogControls\n                  filter={filterCategory}\n                  setFilter={setFilterCategory}\n                  sort={sortOrder}\n                  setSort={setSortOrder}\n                />\n                <Catalog\n                  products={filteredAndSortedProducts} // Pass the computed list\n                  onProductClick={handleProductClick}\n                />\n              </>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}